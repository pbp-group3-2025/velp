{% extends 'base.html' %}
{% block content %}
{% include 'navbar.html' %}
<h1>Velp - Venue</h1>

{% if user.is_authenticated and user.is_superuser %}
<a href="{% url 'main:create_venue' %}">
  <button>+ Add Venue</button>
</a>
{% endif %}

{% if user.is_authenticated %}
  <div class="container py-2">
    <div class="d-flex align-items-center">
      <a href="{% url 'reports:my' %}" class="btn btn-outline-primary btn-sm me-2">My Reports</a>
      {% if user.is_staff or user.is_superuser %}
        <a href="{% url 'reports:mod_list' %}" class="btn btn-primary btn-sm">Moderate Reports</a>
      {% endif %}
    </div>
  </div>
{% endif %}

<a href="{% url 'main:logout' %}">
  <button>Logout</button>
</a>

<h5>Last login session: {{ last_login }}</h5>
<hr>

<div class="mb-3">
    <strong>Filter by:</strong>
    <a href="{% url 'main:show_main' %}?filter=all" class="btn btn-sm btn-primary">All</a>
    <a href="{% url 'main:show_main' %}?filter=pitch" class="btn btn-sm btn-secondary">Pitch</a>
    <a href="{% url 'main:show_main' %}?filter=stadium" class="btn btn-sm btn-secondary">Stadium</a>
    <a href="{% url 'main:show_main' %}?filter=sports_centre" class="btn btn-sm btn-secondary">Sports Centre</a>
</div>

<b><p>Scroll through our list of venues!</p></b>

{% if not venue_list %}
    <p>No venue data available in Velp.</p>


    {% else %}


    {% for venue in venue_list %}
    <hr>
    <div>
    <h2><a href="{% url 'main:show_venue' venue.id %}">{{ venue.title }}</a></h2>
    <!-- # id, CityName, StreetName, leisure, name -->
    <p><b>{{ venue.name }}</b></p>
    <p>City: {{venue.CityName}}</p>


    <p>
        <a href="{% url 'main:show_venue' venue.id %}"><button>Read More</button></a>
        {% if user.is_authenticated and user.username == "ADMIN" %}
        <!-- {% if user.is_authenticated and venue.user == user or user.username == "ADMIN" %} -->
        <a href="{% url 'main:edit_venue' venue.pk %}">
            <button>
                Edit
            </button>
        </a>

        <a href="{% url 'main:delete_venue' venue.pk %}">
        <button>
            Delete
        </button>
        </a>
        {% endif %}
       
    </p>


    </div>


    <hr>
    {% endif %}
    {% endfor %}


{% endif %}

{% endblock content %}
