{% extends "base.html" %}
{% block title %}{{ group.name }} – Community{% endblock %}

{% block content %}
<div class="mb-3 d-flex justify-content-between align-items-center">
  <a class="btn btn-outline-secondary btn-sm" href="{% url 'community:group_list' %}">← Groups</a>

  <div class="d-flex gap-2">
    {% if request.user.is_authenticated and request.user.id == group.owner_id %}
      <a class="btn btn-outline-warning btn-sm" href="{% url 'community:edit_group' group.slug %}">Edit Group</a>

      <button type="button"
              class="btn btn-outline-danger btn-sm"
              data-bs-toggle="modal"
              data-bs-target="#confirmModal"
              data-action="{% url 'community:delete_group' group.slug %}"
              data-title="Delete group"
              data-body="Delete this group? This action can’t be undone."
              data-redirect="{% url 'community:group_list' %}">
        Delete Group
      </button>
      {% if user.is_authenticated %}
        {% include "reports/report_button.html" with obj=group target_type="community" %}
      {% endif %}
    {% endif %}
    <a class="btn btn-primary btn-sm" href="{% url 'community:create_post' group.slug %}">+ New Post</a>
  </div>
</div>

<section class="group-hero mb-4">
  <div class="d-flex justify-content-between align-items-start">
    <div>
      <h1 class="h4 mb-1">{{ group.name }}</h1>
      {% if group.description %}
        <p class="mb-0 text-muted">{{ group.description }}</p>
      {% endif %}
    </div>
    <span class="badge text-bg-success">{{ posts|length }} posts</span>
  </div>
</section>

<div id="post-list">
  {% include "post_list.html" with posts=posts %}
</div>
{% endblock %}
