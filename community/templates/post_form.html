{# community/templates/post_form.html #}
{% extends "base.html" %}
{% block title %}New Post – {{ group.name }}{% endblock %}

{% block content %}
<div class="mb-3 d-flex justify-content-between align-items-center">
  <a href="{% url 'community:group_detail' group.slug %}" class="btn btn-outline-secondary btn-sm">← Back</a>
  <h1 class="h5 mb-0">New Post</h1>
</div>

<form method="post" novalidate>
  {% csrf_token %}

  {# show top-level form errors #}
  {% if form.non_field_errors %}
    <div class="alert alert-danger">
      {{ form.non_field_errors }}
    </div>
  {% endif %}

  <div class="mb-3">
    <label class="form-label" for="{{ form.headline.id_for_label }}">Headline</label>
    {{ form.headline }}
    {% if form.headline.errors %}
      <div class="text-danger small">{{ form.headline.errors|join:", " }}</div>
    {% endif %}
  </div>

  <div class="mb-3">
    <label class="form-label" for="{{ form.content.id_for_label }}">Content</label>
    {{ form.content }}
    {% if form.content.errors %}
      <div class="text-danger small">{{ form.content.errors|join:", " }}</div>
    {% endif %}
  </div>

  <div class="mb-1">
    <label class="form-label" for="{{ form.image_url.id_for_label }}">Image URL (optional)</label>
    {{ form.image_url }}
    {% if form.image_url.errors %}
      <div class="text-danger small">{{ form.image_url.errors|join:", " }}</div>
    {% endif %}
  </div>
  <div class="form-text">Paste a direct image link.</div>

  <div class="mt-3 d-flex gap-2">
    <button class="btn btn-primary" type="submit">Create</button>
    <a class="btn btn-outline-secondary" href="{% url 'community:group_detail' group.slug %}">Cancel</a>
  </div>
</form>
{% endblock %}
